<?php

/**
 * ---------------------------------------------------------------------------------------------------------------------
 * Runtime\Container\ProcessContainer default configuration file.
 *
 * For more information visit: http://kraken-php.com/docs
 * ---------------------------------------------------------------------------------------------------------------------
 */
return [
    /**
     * -----------------------------------------------------------------------------------------------------------------
     * Channel provider configuration.
     * -----------------------------------------------------------------------------------------------------------------
     */
    'channel' => [
        /**
         * -------------------------------------------------------------------------------------------------------------
         * List of additional Channel\Models to be loaded into factories.
         * -------------------------------------------------------------------------------------------------------------
         */
        'models'   => [],

        /**
         * -------------------------------------------------------------------------------------------------------------
         * List of addition Channel\Plugins to be plugged.
         * -------------------------------------------------------------------------------------------------------------
         */
        'plugins'  => [],

        /**
         * -------------------------------------------------------------------------------------------------------------
         * List of channel buses to be registered - there HAS to be at least master, slave and console buses for
         * internal communication.
         * -------------------------------------------------------------------------------------------------------------
         */
        'channels' => [
            'master' => [
                'class'  => 'Kraken\Channel\Model\Socket\Socket',
                'config' => [
                    'type'      => 2,
                    'endpoint'  => 'tcp://%localhost%:2080'
                ]
            ],
            'slave' => [
                'class'  => 'Kraken\Channel\Model\Socket\Socket',
                'config' => [
                    'type'      => 1,
                    'endpoint'  => 'tcp://%localhost%:2081'
                ]
            ],
            'console' => [
                'class'  => 'Kraken\Channel\Model\Socket\Socket',
                'config' => [
                    'type'      => 1,
                    'endpoint'  => 'tcp://%localhost%:2061'
                ]
            ]
        ]
    ],

    /**
     * -----------------------------------------------------------------------------------------------------------------
     * Command service configuration.
     * -----------------------------------------------------------------------------------------------------------------
     */
    'command' => [
        /**
         * -------------------------------------------------------------------------------------------------------------
         * List of custom Commands to be loaded into
         * -------------------------------------------------------------------------------------------------------------
         * This variable should contain array of strings. Each string should be valid className for custom command
         * implementing Runtime\Command\CommandInterface.
         * -------------------------------------------------------------------------------------------------------------
         */
        'models'   => [],

        /**
         * -------------------------------------------------------------------------------------------------------------
         * List of Command plugins to be loaded.
         * -------------------------------------------------------------------------------------------------------------
         * This variable should contain array of strings. Each string should be balid className for custom plugin
         * implementing Util\Factory\FactoryPluginInterface.
         * -------------------------------------------------------------------------------------------------------------
         */
        'plugins'  => [],
        'commands' => []
    ],

    /**
     * -----------------------------------------------------------------------------------------------------------------
     * Core provider configuration.
     * -----------------------------------------------------------------------------------------------------------------
     */
    'core' => [
        'project' => [
            'main.alias' => 'Main',
            'main.name'  => 'Main',
        ],
        'tolerance' => [
            'parent.keepalive' => 15.0,
            'child.keepalive'  => 15.0
        ]
    ],

    /**
     * -----------------------------------------------------------------------------------------------------------------
     * Error provider configuration.
     * -----------------------------------------------------------------------------------------------------------------
     */
    'error' => [
        'handlers' => [],
        'plugins'  => [],
        'manager'  => [
            'params' => [
                'timeout'         => 4.0,
                'retriesLimit'    => 10,
                'retriesInterval' => 2.0
            ],
            'handlers' => [],
            'plugins'  => []
        ],
        'supervisor' => [
            'params' => [
                'timeout'         => 4.0,
                'retriesLimit'    => 10,
                'retriesInterval' => 2.0
            ],
            'handlers' => [],
            'plugins'  => []
        ]
    ],

    /**
     * -----------------------------------------------------------------------------------------------------------------
     * Filesystem provider configuration.
     * -----------------------------------------------------------------------------------------------------------------
     */
    'filesystem' => [
        'cloud' => []
    ],

    /**
     * -----------------------------------------------------------------------------------------------------------------
     * Log provider configuration.
     * -----------------------------------------------------------------------------------------------------------------
     */
    'log' => [
        'messagePattern' => "[%datetime% %level_name%.%channel%]%message%\n\n",
        'datePattern'    => "Y-m-d H:i:s",
        'filePattern'    => "%datapath%/log/%level%/kraken.%date%.log",
        'fileLocking'    => false,
        'filePermission' => 0755
    ],

    /**
     * -----------------------------------------------------------------------------------------------------------------
     * Loop provider configuration.
     * -----------------------------------------------------------------------------------------------------------------
     */
    'loop' => [
        'model' => 'Kraken\Loop\Model\SelectLoop'
    ],

    /**
     * -----------------------------------------------------------------------------------------------------------------
     * Runtime provider configuration.
     * -----------------------------------------------------------------------------------------------------------------
     */
    'runtime' => [
        'manager' => [
            'process' => [
                'class'  => 'Kraken\Runtime\Container\Manager\ProcessManagerBase',
                'config' => []
            ],
            'thread' => [
                'class'  => 'Kraken\Runtime\Container\Manager\ThreadManagerBase',
                'config' => []
            ]
        ]
    ]
];
